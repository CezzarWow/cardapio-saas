(()=>{var c={formatCurrency:function(n){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)},formatMoneyInput:function(n,e=200){let t=n.value.replace(/\D/g,"");if(t===""){n.value="";return}let r=parseInt(t)/100;if(r>e){if(t=t.slice(0,-1),t===""){n.value="";return}r=parseInt(t)/100}t=r.toFixed(2),t=t.replace(".",","),t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),n.value="R$ "+t},formatPhone:function(n){let e=n.value.replace(/\D/g,"");e.length>11&&(e=e.slice(0,11)),e.length>10?e=e.replace(/^(\d\d)(\d{5})(\d{4}).*/,"($1) $2-$3"):e.length>6?e=e.replace(/^(\d\d)(\d{4})(\d{0,4}).*/,"($1) $2-$3"):e.length>2&&(e=e.replace(/^(\d\d)(\d{0,5}).*/,"($1) $2")),n.value=e},initIcons:function(){typeof lucide<"u"&&lucide.createIcons()}};window.Utils=c;window.formatCurrency=c.formatCurrency;(function(){/SamsungBrowser/i.test(navigator.userAgent)&&(document.body.classList.add("samsung-browser"),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".modal-scroll-spacer").forEach(function(t){let r=t.closest(".cardapio-modal-content");if(!r)return;let o=r.querySelector(".cardapio-floating-cart-btn, .send-order-btn"),a=o?o.offsetHeight:70;t.style.height=a+60+"px"})}))})();})();

(()=>{var i={items:[],add:function(t){let e=this._createItem(t);return this.items.push(e),e},remove:function(t){this.items=this.items.filter(e=>e.id!==t)},clear:function(){this.items=[]},getTotals:function(){return{count:this.items.reduce((t,e)=>t+e.quantity,0),value:this.items.reduce((t,e)=>t+e.unitPrice*e.quantity,0)}},getItems:function(){return this.items},setItems:function(t){this.items=t},_createItem:function(t){return{id:Date.now()+Math.random(),productId:t.productId||t.id,name:t.name,basePrice:t.price,quantity:t.quantity||1,additionals:t.additionals||[],observation:t.observation||"",unitPrice:t.price,isCombo:t.isCombo||!1}}};window.CartState=i;})();

(()=>{var p={update:function(t,a){this._updateTotals(t),this._renderList(a),this._updateFloatingButton(t)},_updateTotals:function(t){let a=Utils.formatCurrency(t.value);[document.getElementById("cartTotal"),document.getElementById("cartModalTotal"),document.getElementById("suggestionsCartTotal")].forEach(n=>{n&&(n.textContent=a)})},_updateFloatingButton:function(t){let a=document.getElementById("floatingCart");a&&(a.classList.toggle("show",t.count>0),a.classList.add("pulse"),setTimeout(()=>a.classList.remove("pulse"),500))},_renderList:function(t){let a=document.getElementById("cartItemsContainer");a&&(t.length===0?a.innerHTML=this._renderEmpty():a.innerHTML=t.map(e=>this._renderItem(e)).join(""),Utils.initIcons())},_renderEmpty:function(){return'\n            <div class="cardapio-cart-empty">\n                <div class="cardapio-cart-empty-icon">\n                    <i data-lucide="shopping-bag" size="48"></i>\n                </div>\n                <p>Seu carrinho est\xE1 vazio</p>\n            </div>\n        '},_renderItem:function(t){var i;let a=t.unitPrice*t.quantity,e="";if(t.isCombo&&t.products){let s=t.products.map(o=>{var r;let d=((r=o.additionals)==null?void 0:r.length)>0?'<span style="font-size: 0.8rem; color: #888;">(+ '.concat(o.additionals.map(l=>l.name).join(", "),")</span>"):"";return"<div><span>\u2022 ".concat(o.name,"</span>").concat(d,"</div>")}).join("");e='\n                <div class="cardapio-cart-combo-details" style="font-size: 0.85rem; color: #666; margin-top: 4px; padding-left: 8px; border-left: 2px solid #eee;">\n                    '.concat(s,"\n                </div>")}let n=!t.isCombo&&((i=t.additionals)==null?void 0:i.length)>0?'<p class="cardapio-cart-item-additionals">Extras: '.concat(t.additionals.map(s=>s.name).join(", "),"</p>"):"",c=t.observation?'<p class="cardapio-cart-item-obs">Obs: '.concat(t.observation,"</p>"):"";return'\n            <div class="cardapio-cart-item">\n                <div class="cardapio-cart-item-info">\n                    <p class="cardapio-cart-item-name">'.concat(t.quantity,"x ").concat(t.name,"</p>\n                    ").concat(e,"\n                    ").concat(n,"\n                    ").concat(c,'\n                </div>\n                <div class="cardapio-cart-item-actions">\n                    <span class="cardapio-cart-item-price">\n                        ').concat(Utils.formatCurrency(a),'\n                    </span>\n                    <button class="cardapio-cart-remove-icon-btn" onclick="CardapioCart.remove(').concat(t.id,')">\n                        <i data-lucide="trash-2" size="18"></i>\n                    </button>\n                </div>\n            </div>\n        ')},pulseButton:function(t){let a=document.querySelector(t);a&&(a.classList.add("btn-pulse"),setTimeout(()=>a.classList.remove("btn-pulse"),300))}};window.CartView=p;})();

(()=>{var d={get items(){return CartState.items},set items(t){CartState.setItems(t)},add:function(t){CartState.add(t),this.updateUI()},addDirect:function(t,a,e){this.add({id:t,name:a,price:e})},addDrink:function(t,a,e){this.add({id:t,name:a,price:e}),CartView.pulseButton('.suggestion-drink-btn[data-id="'.concat(t,'"]'))},addSauce:function(t,a,e){this.add({productId:"sauce_"+t,name:"Molho: "+a,price:e}),CartView.pulseButton('.suggestion-sauce-btn[data-id="'.concat(t,'"]'))},addCombo:function(t,a,e){this.add({productId:"combo_"+t,name:a,price:e,isCombo:!0})},remove:function(t){CartState.remove(t),this.updateUI()},clear:function(){CartState.clear(),this.updateUI()},getTotals:function(){return CartState.getTotals()},updateUI:function(){CartView.update(CartState.getTotals(),CartState.getItems())}};try{Object.defineProperty(window,"cart",{get:()=>CartState.items,set:t=>CartState.setItems(t),configurable:!0})}catch(t){window.cart=CartState.items}window.addToCartDirect=(t,a,e,o)=>d.addDirect(t,a,e);window.addDrinkToCart=(t,a,e,o)=>d.addDrink(t,a,e);window.addSauceToCart=(t,a,e)=>d.addSauce(t,a,e);window.addComboToCart=(t,a,e,o)=>d.addCombo(t,a,e);window.removeFromCart=t=>d.remove(t);window.updateCartDisplay=()=>d.updateUI();window.updateSuggestionsCartDisplay=()=>d.updateUI();window.CardapioCart=d;})();

(()=>{var t={init:function(){},openSuggestions:function(){let o=document.getElementById("suggestionsModal");o&&(o.classList.add("show"),Utils.initIcons())},closeSuggestions:function(){document.getElementById("suggestionsModal").classList.remove("show")},openCart:function(){document.getElementById("cartModal").classList.add("show"),Utils.initIcons()},closeCart:function(){document.getElementById("cartModal").classList.remove("show")},goToCheckout:function(){this.closeCart(),this.openSuggestions(),CardapioCart.updateUI()}};window.CardapioModals=t;window.openProductModal=o=>t.openProduct(o);window.closeProductModal=()=>t.closeProduct();window.increaseQuantity=()=>t.increaseQty();window.decreaseQuantity=()=>t.decreaseQty();window.openCartModal=()=>t.openCart();window.closeCartModal=()=>t.closeCart();window.openSuggestionsModal=()=>t.openSuggestions();window.closeSuggestionsModal=()=>t.closeSuggestions();window.goToCheckout=()=>t.goToCheckout();document.addEventListener("change",function(o){if(o.target.classList.contains("cardapio-additional-checkbox")){let e=o.target.getAttribute("data-additional-id"),n=o.target.getAttribute("data-additional-name"),a=parseFloat(o.target.getAttribute("data-additional-price"));t.toggleAdditional(e,n,a,o.target.checked)}});window.addToCart=()=>t.addToCartAction();})();

(()=>{(function(){"use strict";CardapioModals.currentProduct=null,CardapioModals.currentQuantity=1,CardapioModals.selectedAdditionals=[],CardapioModals.basePrice=0,CardapioModals._findProduct=function(t){if(typeof window.products<"u"&&Array.isArray(window.products)){let o=window.products.find(i=>i.id==t);if(o)return o}console.warn("[CardapioModals] Produto n\xE3o encontrado no array. Tentando DOM. ID:",t);let e=document.querySelector('.cardapio-product-card[data-product-id="'.concat(t,'"]'));return e?{id:t,name:e.getAttribute("data-product-name"),price:parseFloat(e.getAttribute("data-product-price")),description:e.getAttribute("data-product-description"),image:e.getAttribute("data-product-image"),additionals:[]}:(console.error("[CardapioModals] Produto n\xE3o encontrado.",t),null)},CardapioModals._getProductRelations=function(t){return(typeof window.PRODUCT_RELATIONS<"u"?window.PRODUCT_RELATIONS:{})[t]||[]},CardapioModals._fillProductInfo=function(t){document.getElementById("modalProductName").textContent=t.name,document.getElementById("modalProductDescription").textContent=t.description||"",document.getElementById("modalProductPrice").textContent=Utils.formatCurrency(this.basePrice);let e=document.getElementById("modalProductImage");t.image?(e.src=(typeof BASE_URL<"u"?BASE_URL:"")+"/uploads/"+t.image,e.style.display="block"):e.style.display="none"},CardapioModals._resetModalInputs=function(){let t=document.getElementById("modalObservation");t&&(t.value=""),document.getElementById("modalQuantity").textContent="1"},CardapioModals._showModal=function(){let t=document.getElementById("productModal");t.classList.add("show"),requestAnimationFrame(()=>{let e=t.querySelector(".cardapio-modal-content"),o=t.querySelector(".cardapio-modal-body");e&&(e.scrollTop=0),o&&(o.scrollTop=0)})},CardapioModals.openProduct=function(t){let e=this._findProduct(t);if(!e)return;let o=this._getProductRelations(e.id);if(!(o.length>0)){CardapioCart.addDirect(e.id,e.name,parseFloat(e.price),e.image);return}this.currentProduct=e,this.currentQuantity=1,this.selectedAdditionals=[],this.basePrice=parseFloat(e.price),this._fillProductInfo(e),this.renderAdditionals(o),this._resetModalInputs(),this.updateModalPrice(),this._showModal()},CardapioModals.closeProduct=function(){document.getElementById("productModal").classList.remove("show"),this.currentProduct=null},CardapioModals.increaseQty=function(){this.currentQuantity++,this.updateQtyDisplay()},CardapioModals.decreaseQty=function(){this.currentQuantity>1&&(this.currentQuantity--,this.updateQtyDisplay())},CardapioModals.updateQtyDisplay=function(){document.getElementById("modalQuantity").textContent=this.currentQuantity,this.updateModalPrice()},CardapioModals.renderAdditionals=function(t){this.selectedAdditionals=[],document.querySelectorAll(".cardapio-additional-checkbox").forEach(a=>a.checked=!1);let e=document.querySelectorAll(".cardapio-additional-group"),o=document.querySelector(".cardapio-modal-additionals-title");if(!t||!Array.isArray(t)||t.length===0){o&&(o.style.display="none"),e.forEach(a=>a.style.display="none");return}o&&(o.style.display="block");let i=new Set(t.map(a=>String(a))),d=!1;e.forEach(a=>{let n=i.has(String(a.getAttribute("data-group-id")));a.style.display=n?"block":"none",n&&(d=!0)}),!d&&o&&(o.style.display="none")},CardapioModals.toggleAdditional=function(t,e,o,i){i?this.selectedAdditionals.push({id:t,name:e,price:o}):this.selectedAdditionals=this.selectedAdditionals.filter(d=>d.id!==t),this.updateModalPrice()},CardapioModals.updateModalPrice=function(){let t=this.selectedAdditionals.reduce((o,i)=>o+i.price,0),e=(this.basePrice+t)*this.currentQuantity;document.getElementById("modalTotalPrice").textContent=Utils.formatCurrency(e)},CardapioModals.addToCartAction=function(){if(!this.currentProduct)return;let t=document.getElementById("modalObservation").value.trim(),e=this.selectedAdditionals.reduce((i,d)=>i+d.price,0),o={id:Date.now()+Math.random(),productId:this.currentProduct.id,name:this.currentProduct.name,basePrice:this.basePrice,quantity:this.currentQuantity,additionals:[...this.selectedAdditionals],observation:t,unitPrice:this.basePrice+e};CardapioCart.add(o),this.closeProduct()}})();})();

(()=>{var s={calculateTotal:function(a,t,o){let r=0;return Object.values(t).forEach(e=>{Array.isArray(e)&&e.forEach(i=>{r+=parseFloat(i.price)||0})}),(a+r)*o},validate:function(a,t){return!0},prepareCartItem:function(a,t,o,r){let e=this.calculateTotal(0,t,1),i=a.items.map(n=>{let c=t[n.product_id]||[];return{id:n.product_id,name:n.product_name,additionals:c}});return{id:Date.now()+Math.random(),isCombo:!0,comboId:a.id,name:a.name,image:a.image,basePrice:parseFloat(a.price),quantity:o,products:i,observation:r||"",unitPrice:parseFloat(a.price)+e}}};window.ComboValidator=s;})();

(()=>{var p={renderModal:function(e){document.getElementById("modalComboName").textContent=e.name,document.getElementById("modalComboDescription").textContent=e.description||"",document.getElementById("modalComboPrice").textContent=Utils.formatCurrency(parseFloat(e.price));let t=document.getElementById("modalComboImage");e.image&&t?(t.src=(typeof BASE_URL<"u"?BASE_URL:"")+"/uploads/"+e.image,t.style.display="block"):t&&(t.style.display="none"),document.getElementById("modalComboQuantity").textContent="1";let o=document.getElementById("modalComboObservation");o&&(o.value=""),this._ensureInstructionText(),this._renderProductList(e.items)},updatePrice:function(e){let t=document.getElementById("modalComboTotalPrice");t&&(t.textContent=Utils.formatCurrency(e))},updateQuantity:function(e){let t=document.getElementById("modalComboQuantity");t&&(t.textContent=e)},updateBadge:function(e,t){let o=document.getElementById("badge-".concat(e));o&&(o.textContent="".concat(t," extra").concat(t!==1?"s":""),o.style.display=t>0?"inline-block":"none")},open:function(){document.getElementById("comboModal").classList.add("show"),Utils.initIcons()},close:function(){document.getElementById("comboModal").classList.remove("show")},_ensureInstructionText:function(){let e=document.getElementById("comboInstructionText");if(!e){e=document.createElement("p"),e.id="comboInstructionText",e.style.cssText="text-align:left; margin-bottom:15px; margin-top:10px; font-weight:700; font-size:0.9rem; color:#e63946;",e.textContent="Itens inclusos no combo. Clique para adicionar.";let t=document.getElementById("comboProductsContainer");t&&t.parentNode.insertBefore(e,t)}},_renderProductList:function(e){let t=document.getElementById("comboProductsContainer");if(t){if(t.innerHTML="",!e||e.length===0){t.innerHTML='<p style="color:#666; font-style:italic;">Nenhum item neste combo.</p>';return}e.forEach(o=>{t.appendChild(this._createProductItemElement(o))})}},_createProductItemElement:function(e){var i;let t=typeof products<"u"?products.find(n=>n.id==e.product_id):null,o=typeof PRODUCT_RELATIONS<"u"?PRODUCT_RELATIONS:{},d=e.allow_additionals==1&&t&&((i=o[t.id])==null?void 0:i.length)>0,c=document.createElement("div");c.className="combo-product-collapse open";let s='\n            <div class="combo-product-header" '.concat(d?"onclick=\"this.parentNode.classList.toggle('open')\"":"",' style="').concat(d?"cursor:pointer":"",'">\n                <div class="combo-product-info">\n                    <span>').concat(e.product_name,"</span>\n                    ").concat(d?'<span class="combo-extras-badge" id="badge-'.concat(e.product_id,'" style="display:none">0 extras</span>'):"","\n                </div>\n                ").concat(d?'<i data-lucide="chevron-down" class="combo-toggle-icon" size="16"></i>':"","\n            </div>");if(c.innerHTML=s,d){let n=document.createElement("div");n.className="combo-product-body";let l=document.createElement("div");l.className="combo-additional-list",[...new Set(o[t.id])].forEach(m=>{let r=document.querySelector('.cardapio-additional-group[data-group-id="'.concat(m,'"]'));if(r){let a=r.cloneNode(!0);a.style.display="block",a.querySelectorAll("input").forEach(u=>this._setupInput(u,e,a)),l.appendChild(a)}}),n.appendChild(l),c.appendChild(n)}return c},_setupInput:function(e,t,o){let{additionalId:d,additionalName:c,additionalPrice:s}=e.dataset,i="combo-".concat(t.product_id,"-").concat(d,"-").concat(Date.now().toString(36));Object.assign(e,{id:i,name:"combo_extras_".concat(t.product_id,"[]"),checked:!1}),Object.assign(e.dataset,{comboProductId:t.product_id,comboAddId:d,comboAddName:c,comboAddPrice:s}),e.classList.remove("cardapio-additional-checkbox");let n=e.closest("label")||e.nextElementSibling||o.querySelector('label[for="'.concat(e.id,'"]'));(n==null?void 0:n.tagName)==="LABEL"&&n.setAttribute("for",i)}};window.ComboView=p;})();

(()=>{var d={currentCombo:null,quantity:1,selections:{},init:function(){document.addEventListener("change",o=>{o.target.matches('input[name^="combo_extras_"]')&&this.handleAdditionalChange(o.target)})},open:function(o){let t=typeof combos<"u"?combos.find(e=>e.id==o):null;if(!t)return console.error("Combo n\xE3o encontrado");this.currentCombo=t,this.quantity=1,this.selections={},t.items&&t.items.forEach(e=>this.selections[e.product_id]=[]),ComboView.renderModal(t),this.updateTotal(),ComboView.open()},close:function(){ComboView.close(),this.currentCombo=null},handleAdditionalChange:function(o){let t=o.dataset.comboProductId,e=o.dataset.comboAddId,i=o.dataset.comboAddName,n=parseFloat(o.dataset.comboAddPrice),s=o.checked;this.selections[t]||(this.selections[t]=[]),s?this.selections[t].push({id:e,name:i,price:n}):this.selections[t]=this.selections[t].filter(c=>c.id!=e);let a=this.selections[t].length;ComboView.updateBadge(t,a),this.updateTotal()},increaseQty:function(){this.quantity++,ComboView.updateQuantity(this.quantity),this.updateTotal()},decreaseQty:function(){this.quantity>1&&(this.quantity--,ComboView.updateQuantity(this.quantity),this.updateTotal())},updateTotal:function(){if(!this.currentCombo)return;let o=ComboValidator.calculateTotal(parseFloat(this.currentCombo.price),this.selections,this.quantity);ComboView.updatePrice(o)},addToCart:function(){var e;if(!this.currentCombo)return;let o=(e=document.getElementById("modalComboObservation"))==null?void 0:e.value,t=ComboValidator.prepareCartItem(this.currentCombo,this.selections,this.quantity,o);CardapioCart.add(t),this.close()}};window.ComboController=d;})();

(()=>{(function(){"use strict";if(typeof ComboController<"u")ComboController.init();else{console.error("ComboController module not loaded!");return}CardapioModals.openCombo=o=>ComboController.open(o),CardapioModals.closeCombo=()=>ComboController.close(),CardapioModals.increaseComboQty=()=>ComboController.increaseQty(),CardapioModals.decreaseComboQty=()=>ComboController.decreaseQty(),CardapioModals.addComboToCart=()=>ComboController.addToCart(),Object.defineProperty(CardapioModals,"currentCombo",{get:()=>ComboController.currentCombo})})();})();

(()=>{var c={send:async function(e){let r=this.captureFormData(),a=this.validate(r,e);if(a){alert(a);return}let n=this.prepareOrderData(r,e);try{let t=await this.submitToApi(n);if(!t.success){alert("Erro ao enviar pedido: "+(t.message||"Erro desconhecido"));return}this.sendToWhatsApp(r,e),e.reset()}catch(t){console.error("Erro ao enviar pedido:",t),alert("Erro de conex\xE3o ao enviar pedido. Por favor, tente novamente.")}},captureFormData:function(){var e,r,a,n,t,s,i;return{name:((e=document.getElementById("customerName"))==null?void 0:e.value.trim())||"",phone:((r=document.getElementById("customerPhone"))==null?void 0:r.value.trim())||"",address:((a=document.getElementById("customerAddress"))==null?void 0:a.value.trim())||"",number:((n=document.getElementById("customerNumber"))==null?void 0:n.value.trim())||"",neighborhood:((t=document.getElementById("customerNeighborhood"))==null?void 0:t.value.trim())||"",obs:((s=document.getElementById("customerObs"))==null?void 0:s.value.trim())||"",changeAmount:((i=document.getElementById("changeAmount"))==null?void 0:i.value.trim())||""}},validate:function(e,r){if(!e.name)return"Por favor, preencha seu nome.";if(r.selectedOrderType==="entrega"){if(!e.address)return"Por favor, preencha o endere\xE7o.";if(!e.number&&!r.hasNoNumber)return'Por favor, preencha o n\xFAmero ou selecione "Sem n\xBA".'}return r.selectedPaymentMethod?null:"Por favor, selecione a forma de pagamento."},prepareOrderData:function(e,r){let a=window.cardapioConfig||{},n=window.restaurantId||a.restaurant_id,t=r.getDeliveryFee();return{restaurant_id:n,customer_name:e.name,customer_phone:e.phone,customer_address:e.address,customer_number:e.number,customer_neighborhood:e.neighborhood,order_type:r.selectedOrderType,payment_method:r.selectedPaymentMethod,change_amount:e.changeAmount,observation:e.obs,delivery_fee:t,items:CardapioCart.items.map(s=>({product_id:s.productId||null,name:s.name,quantity:s.quantity,unit_price:s.unitPrice,observation:s.observation||"",additionals:(s.additionals||[]).map(i=>({id:i.id,name:i.name,price:i.price||0}))}))}},submitToApi:async function(e){var n;let r=(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content");return await(await fetch(window.BASE_URL+"/api/v1/order/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r},body:JSON.stringify(e)})).json()},sendToWhatsApp:function(e,r){let a=window.cardapioConfig||{},n=(a.whatsapp_number||"").replace(/\D/g,""),t="Ol\xE1! Gostaria de fazer um pedido:",s="Aguardo a confirma\xE7\xE3o.";try{if(a.whatsapp_message){let o=JSON.parse(a.whatsapp_message);o&&typeof o=="object"&&(o.before||o.after)?(Array.isArray(o.before)&&o.before.length>0&&(t=o.before.join("\n")),Array.isArray(o.after)&&o.after.length>0&&(s=o.after.join("\n"))):Array.isArray(o)&&(o.length>0&&o[0]&&(t=o[0]),o.length>1&&o[1]&&(s=o[1]))}}catch(o){console.warn("Erro ao decodificar mensagens do WhatsApp",o)}let i=this.formatOrderSummary(e,r),d="".concat(t,"\n\n").concat(i,"\n\n").concat(s);if(n){let o="https://wa.me/55".concat(n,"?text=").concat(encodeURIComponent(d));window.open(o,"_blank"),alert("Pedido enviado com sucesso! \u2705\n\nSeu pedido foi registrado e aparecer\xE1 para o restaurante.")}else alert("Pedido registrado com sucesso! \u2705\n\nO restaurante foi notificado.\n\n(WhatsApp n\xE3o configurado para este restaurante)")},formatOrderSummary:function(e,r){let a=r.getDeliveryFee(),n="*NOVO PEDIDO*\n\n\u{1F464} *Nome:* "+e.name+"\n";if(r.selectedOrderType==="entrega")n+="\u{1F4CD} *Entrega:* "+e.address+", "+e.number+"\n\u{1F3D8}\uFE0F *Bairro:* "+e.neighborhood+"\n";else{let t=r.selectedOrderType==="local"?"Mesa/Comanda":"Retirada";n+="\u{1F3EA} *"+t+":* "+e.number+"\n"}return n+="\n\u{1F6D2} *ITENS:*\n",CardapioCart.items.forEach(t=>{n+="\u2022 ".concat(t.quantity,"x ").concat(t.name," ")+(t.additionals.length?"(".concat(t.additionals.map(s=>s.name).join(", "),")"):"")+"\n",t.observation&&(n+="  _Obs: ".concat(t.observation,"_\n"))}),r.selectedOrderType==="entrega"&&a>0&&(n+="\u{1F6F5} *Taxa de Entrega:* "+Utils.formatCurrency(a)+"\n"),n+="\n\u{1F4B0} *Total Final:* "+Utils.formatCurrency(r.getFinalTotal())+"\n",n+="\u{1F4B3} *Pagamento:* "+r.selectedPaymentMethod.toUpperCase(),r.selectedPaymentMethod==="dinheiro"&&e.changeAmount&&(n+=" (Troco para: "+e.changeAmount+")"),e.obs&&(n+="\n\u{1F4DD} *Obs Geral:* "+e.obs),n}};window.CheckoutOrder=c;})();

(()=>{var c={toggleNoNumber:function(e){let t=document.getElementById("customerNumber"),n=document.querySelector(".no-number-btn");e.hasNoNumber=!e.hasNoNumber,e.hasNoNumber?(t.value="S/N",t.disabled=!0,n.classList.add("active")):(t.value="",t.disabled=!1,n.classList.remove("active"),t.focus())},toggleNoChange:function(e){let t=document.getElementById("changeAmount"),n=document.querySelector(".no-change-btn");e.hasNoChange=!e.hasNoChange,e.hasNoChange?(t.value="Sem troco",t.disabled=!0,n.classList.add("active"),this.confirmChange()):(t.value="R$ 0,00",t.disabled=!1,n.classList.remove("active"))},confirmChange:function(){let e=document.getElementById("changeAmount"),t=document.getElementById("changeInputGroup"),n=document.getElementById("changeSummary"),o=document.getElementById("changeSummaryText"),a=e.value;(!a||a==="R$ 0,00")&&(a="Sem troco"),o.textContent=a==="Sem troco"?"Sem troco":"Troco: "+a,t&&(t.style.display="none"),n&&(n.style.display="flex"),document.getElementById("changeContainer").classList.add("summary-mode")},editChange:function(e){let t=document.getElementById("changeInputGroup"),n=document.getElementById("changeSummary"),o=document.getElementById("changeAmount");t&&(t.style.display="block"),n&&(n.style.display="none"),document.getElementById("changeContainer").classList.remove("summary-mode"),o&&(o.disabled=!1,o.value&&(o.value.includes("Sem")||o.value.includes("troco"))&&(o.value="")),document.querySelectorAll(".no-change-btn").forEach(a=>{a.classList.remove("active")}),e.hasNoChange=!1,o&&setTimeout(()=>o.focus(),50)},scrollToChange:function(){let e=document.getElementById("changeContainer");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},updateFieldsVisibility:function(e){let t=document.getElementById("msgLocal"),n=document.getElementById("msgRetirada");t&&(t.style.display=e==="local"?"block":"none"),n&&(n.style.display=e==="retirada"?"block":"none"),document.querySelectorAll(".delivery-only").forEach(s=>{s.style.display=e==="entrega"?"":"none"});let o=document.getElementById("numberFieldRow");o&&(o.style.display=e==="entrega"?"":"none");let a=document.getElementById("customerNumber");a&&(a.placeholder=e==="local"?"Mesa *":"N\xBA *");let l=document.querySelector('label[for="customerNumber"]');l&&(e==="local"?l.textContent="Mesa / Comanda":e==="retirada"?l.textContent="Identifica\xE7\xE3o (Nome/ID)":l.textContent="N\xFAmero")}};window.CheckoutFields=c;})();

(()=>{var a={openOrderReview:function(t){if(CardapioCart.items.length===0){alert("Seu carrinho est\xE1 vazio!");return}this.renderReviewItems(),t.updateTotals(),document.getElementById("orderReviewModal").classList.add("show")},closeOrderReview:function(){document.getElementById("orderReviewModal").classList.remove("show")},renderReviewItems:function(){let t=document.getElementById("orderReviewItems");if(!t)return;t.innerHTML="",CardapioCart.items.forEach(e=>{t.innerHTML+='\n                <div class="order-review-item">\n                    <div class="order-review-item-qty">'.concat(e.quantity,'x</div>\n                    <div class="order-review-item-info">\n                        <div class="order-review-item-name">').concat(e.name,"</div>\n                        \n                        ").concat(e.isCombo&&e.products?'\n                            <div class="order-review-combo-details" style="font-size: 0.85rem; color: #666; margin-top: 2px;">\n                                '.concat(e.products.map(n=>"\n                                    <div>\n                                        <span>\u2022 ".concat(n.name,"</span>\n                                        ").concat(n.additionals&&n.additionals.length>0?'\n                                            <span style="font-size: 0.8rem; color: #888;">(+ '.concat(n.additionals.map(i=>i.name).join(", "),")</span>\n                                        "):"","\n                                    </div>\n                                ")).join(""),"\n                            </div>\n                        "):"","\n\n                        ").concat(!e.isCombo&&e.additionals&&e.additionals.length>0?'<div class="order-review-item-extras">+ '.concat(e.additionals.map(n=>n.name).join(", "),"</div>"):"","\n                        ").concat(e.observation?'<div class="order-review-item-obs">Obs: '.concat(e.observation,"</div>"):"",'\n                    </div>\n                    <div class="order-review-item-actions">\n                        <span class="order-review-item-price">').concat(Utils.formatCurrency(e.unitPrice*e.quantity),'</span>\n                        <button class="order-review-remove-btn" onclick="CardapioCart.remove(').concat(e.id,'); CheckoutModals.renderReviewItems(); CardapioCheckout.updateTotals(); if(CardapioCart.items.length === 0) CheckoutModals.closeOrderReview();">\n                            <i data-lucide="trash-2" size="16"></i>\n                        </button>\n                    </div>\n                </div>\n            ')}),Utils.initIcons()},goToPayment:function(t){this.closeOrderReview(),t.updateTotals();let o=document.getElementById("changeContainer");o&&(o.style.display="none"),t.selectedPaymentMethod=null,document.querySelectorAll('input[name="paymentMethod"]').forEach(n=>n.checked=!1),document.getElementById("paymentModal").classList.remove("has-change");let e=document.getElementById("changeAmount");e&&(e.value="",e.oninput=function(){Utils.formatMoneyInput(this)}),document.getElementById("paymentModal").classList.add("show"),CheckoutFields.updateFieldsVisibility(t.selectedOrderType)},closePayment:function(){document.getElementById("paymentModal").classList.remove("show")},backToReview:function(t){this.closePayment(),this.openOrderReview(t)},selectPaymentMethod:function(t,o){t.selectedPaymentMethod=o;let e=document.getElementById("changeContainer");o==="dinheiro"?(e.style.display="block",document.getElementById("paymentModal").classList.add("has-change"),setTimeout(()=>CheckoutFields.scrollToChange(),250)):(e.style.display="none",document.getElementById("paymentModal").classList.remove("has-change"),t.hasNoChange=!1)}};window.CheckoutModals=a;})();

(()=>{var n={selectedOrderType:"entrega",selectedPaymentMethod:null,hasNoNumber:!1,hasNoChange:!1,init:function(){let e=document.getElementById("customerPhone");e&&(e.oninput=function(){Utils.formatPhone(this)});let t=document.getElementById("paymentModal");t&&t.addEventListener("click",o=>{o.target===t&&this.closePayment()}),setTimeout(()=>{let o=document.querySelector('input[name="orderType"][value="'.concat(this.selectedOrderType,'"]'));if(!o||o.disabled){let i=document.querySelector('input[name="orderType"]:not([disabled])');i&&this.setOrderType(i.value)}},100)},getDeliveryFee:function(){if(this.selectedOrderType!=="entrega")return 0;let e=window.cardapioConfig||{};return parseFloat(e.delivery_fee||0)},getFinalTotal:function(){return CardapioCart.getTotals().value+this.getDeliveryFee()},updateTotals:function(){let e=this.getDeliveryFee(),t=this.getFinalTotal(),o=document.getElementById("deliveryFeeRow");if(o)if(this.selectedOrderType==="entrega"&&e>0){o.style.display="flex";let d=document.getElementById("deliveryFeeValue");d&&(d.innerText=Utils.formatCurrency(e))}else o.style.display="none";let i=Utils.formatCurrency(t),a=document.getElementById("orderReviewTotal");a&&(a.innerText=i);let r=document.getElementById("paymentTotalValue");r&&(r.innerText=i)},setOrderType:function(e){this.selectedOrderType=e,document.querySelectorAll('input[name="orderType"]').forEach(t=>{t.checked=t.value===e}),this.updateFieldsVisibility(),this.updateTotals()},updateFieldsVisibility:function(){CheckoutFields.updateFieldsVisibility(this.selectedOrderType)},toggleNoNumber:function(){CheckoutFields.toggleNoNumber(this)},toggleNoChange:function(){CheckoutFields.toggleNoChange(this)},confirmChange:function(){CheckoutFields.confirmChange()},editChange:function(){CheckoutFields.editChange(this)},scrollToChange:function(){CheckoutFields.scrollToChange()},openOrderReview:function(){CheckoutModals.openOrderReview(this)},closeOrderReview:function(){CheckoutModals.closeOrderReview()},renderReviewItems:function(){CheckoutModals.renderReviewItems(),this.updateTotals()},goToPayment:function(){CheckoutModals.goToPayment(this)},closePayment:function(){CheckoutModals.closePayment()},backToReview:function(){CheckoutModals.backToReview(this)},selectPaymentMethod:function(e){CheckoutModals.selectPaymentMethod(this,e)},sendOrder:async function(){await CheckoutOrder.send(this)},reset:function(){CardapioCart.clear(),this.selectedPaymentMethod=null,this.selectedOrderType="entrega",this.hasNoNumber=!1,document.getElementById("paymentModal").classList.remove("show"),document.querySelectorAll("input").forEach(e=>e.value=""),document.getElementById("changeContainer").style.display="none",document.querySelectorAll('input[type="radio"]').forEach(e=>e.checked=!1),this.setOrderType("entrega")}};window.CardapioCheckout=n;try{Object.defineProperty(window,"selectedOrderType",{get:()=>n.selectedOrderType,set:e=>n.selectedOrderType=e,configurable:!0}),Object.defineProperty(window,"selectedPaymentMethod",{get:()=>n.selectedPaymentMethod,set:e=>n.selectedPaymentMethod=e,configurable:!0}),Object.defineProperty(window,"hasNoNumber",{get:()=>n.hasNoNumber,set:e=>n.hasNoNumber=e,configurable:!0})}catch(e){console.warn("[CardapioCheckout] Falha ao definir getters globais:",e)}document.addEventListener("change",function(e){e.target.name==="paymentMethod"&&n.selectPaymentMethod(e.target.value)});})();

(()=>{(function(){"use strict";let d={renderCategory:function(e,i){if(!window.products)return;let a=window.products.filter(r=>r.category===e);if(a.length===0)return;let c=a.map(r=>this.renderProductCard(r)).join("");i.innerHTML=c,i.classList.add("rendered"),typeof lucide<"u"&&lucide.createIcons({root:i})},renderProductCard:function(e){let i=parseFloat(e.price).toFixed(2).replace(".",","),a="";return e.image?a='<img src="'.concat(window.BASE_URL,"/uploads/").concat(e.image,'" class="cardapio-product-image" loading="lazy" alt="').concat(this.escapeHtml(e.name),'">'):e.icon_as_photo&&e.icon?a='\n                    <div class="cardapio-product-icon-placeholder" style="background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%); display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; border-radius: 8px;">\n                        <span style="font-size: 3rem;">'.concat(e.icon,"</span>\n                    </div>\n                "):a='<div class="cardapio-product-image-placeholder"><i data-lucide="image" size="24"></i></div>','\n                <div \n                    class="cardapio-product-card" \n                    data-product-id="'.concat(e.id,'"\n                    data-product-name="').concat(this.escapeHtml(e.name),'"\n                    data-product-price="').concat(e.price,'"\n                    onclick="openProductModal(').concat(e.id,')" \n                    style="cursor: pointer; display: flex;"\n                >\n                    <div class="cardapio-product-image-wrapper">\n                        ').concat(a,'\n                    </div>\n                    \n                    <div class="cardapio-product-info">\n                        <h3 class="cardapio-product-name">').concat(this.escapeHtml(e.name),'</h3>\n                        <p class="cardapio-product-description">').concat(this.escapeHtml(e.description),'</p>\n                        <div class="cardapio-product-footer">\n                            <span class="cardapio-product-price">R$ ').concat(i,'</span>\n                        </div>\n                    </div>\n                    <button class="cardapio-add-btn"><i data-lucide="plus" size="16"></i></button>\n                </div>\n            ')},escapeHtml:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}};window.CatalogRenderer=d})();})();

(()=>{(function(){"use strict";let o={observer:null,init:function(){if(!("IntersectionObserver"in window)){this.renderAllImmediately();return}this.createObserver(),this.observeCategories()},createObserver:function(){let t={root:null,rootMargin:"200px",threshold:.01};this.observer=new IntersectionObserver((e,a)=>{e.forEach(r=>{r.isIntersecting&&(this.loadCategory(r.target),a.unobserve(r.target))})},t)},observeCategories:function(){document.querySelectorAll(".cardapio-category-section[data-lazy-category]").forEach(e=>{e.classList.contains("rendered")||this.observer.observe(e)})},loadCategory:function(t){let e=t.getAttribute("data-lazy-category");window.CatalogRenderer&&window.CatalogRenderer.renderCategory(e,t)},renderAllImmediately:function(){document.querySelectorAll(".cardapio-category-section[data-lazy-category]").forEach(e=>this.loadCategory(e))}};window.CatalogVirtualizer=o})();})();

(()=>{(function(){"use strict";function y(t,o){let a=null;return function(){let n=arguments,e=this;clearTimeout(a),a=setTimeout(()=>t.apply(e,n),o)}}let u={init:function(){this.initModules(),this.bindEvents(),this.recoverCart(),this.initIcons(),window.CatalogVirtualizer&&window.CatalogVirtualizer.init()},initModules:function(){window.CardapioModals&&CardapioModals.init&&CardapioModals.init(),window.CardapioCheckout&&CardapioCheckout.init&&CardapioCheckout.init()},recoverCart:function(){window.CardapioCart&&CardapioCart.updateUI()},initIcons:function(){typeof lucide<"u"&&lucide.createIcons()},bindEvents:function(){this.ui.bindViewportAdjustments();let t=document.getElementById("cardapioSearchInput");if(t){this.ui.cacheNodes();let o=this.ui;t.addEventListener("input",y(a=>o.handleSearch(a),300))}this.ui.bindCategoryFilters(),this.ui.bindAddButtons()},ui:{bindViewportAdjustments:function(){window.visualViewport&&typeof window.onVV=="function"&&(window.visualViewport.addEventListener("resize",window.onVV),window.visualViewport.addEventListener("scroll",window.onVV)),typeof window.adjustPaddingForKeyboard=="function"&&typeof window.ensureVisible=="function"&&document.querySelectorAll("input, textarea").forEach(t=>{t.addEventListener("focus",()=>{window.adjustPaddingForKeyboard(!0),window.ensureVisible(t)}),t.addEventListener("blur",()=>{window.adjustPaddingForKeyboard(!1)})})},cacheNodes:function(){try{this._categories=Array.from(document.querySelectorAll(".cardapio-category-section"))}catch(t){this._categories=[]}},handleSearch:function(t){let o=(t.target.value||"").toLowerCase().trim(),a=document.querySelector(".cardapio-products");if(o===""){a&&a.classList.remove("searching-mode"),document.querySelectorAll(".cardapio-category-section").forEach(i=>{i.style.display="block",i.querySelectorAll(".cardapio-product-card").forEach(r=>r.style.display="flex")});return}a&&a.classList.add("searching-mode");let n=document.querySelectorAll(".cardapio-category-section");if(n.forEach(i=>i.style.display="none"),!window.products)return;let e=window.products.filter(i=>{let r=(i.name||"").toLowerCase(),s=(i.description||"").toLowerCase();return r.includes(o)||s.includes(o)}),d=e.reduce((i,r)=>(i[r.category]||(i[r.category]=[]),i[r.category].push(r),i),{});Object.keys(d).forEach(i=>{let r=Array.from(n).find(s=>s.getAttribute("data-lazy-category")===i);r&&(!r.classList.contains("rendered")&&window.CatalogVirtualizer&&window.CatalogVirtualizer.loadCategory(r),r.style.display="block",r.querySelectorAll(".cardapio-product-card").forEach(c=>{let f=c.getAttribute("data-product-id"),l=e.some(p=>p.id==f);c.style.display=l?"flex":"none"}))}),n.forEach(i=>{if(!i.getAttribute("data-lazy-category")){let r=i.querySelectorAll(".cardapio-product-card"),s=!1;r.forEach(c=>{let f=c.getAttribute("data-product-id")||c.getAttribute("data-combo-id"),l=!1;c.dataset.comboId?(c.dataset.comboName||"").toLowerCase().includes(o)&&(l=!0):f&&(l=e.some(p=>p.id==f)),c.style.display=l?"flex":"none",l&&(s=!0)}),s&&(i.style.display="block")}})},bindCategoryFilters:function(){document.querySelectorAll(".cardapio-category-btn").forEach(o=>{o.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.filterByCategory(o.getAttribute("data-category"))})});let t=document.querySelector(".cardapio-categories");t&&t.addEventListener("click",o=>{let a=o.target.closest(".cardapio-category-btn");a&&(o.preventDefault(),this.filterByCategory(a.getAttribute("data-category")))})},filterByCategory:function(t){let o=document.querySelectorAll(".cardapio-category-section");document.querySelectorAll(".cardapio-category-btn").forEach(e=>{let d=e.getAttribute("data-category")===t;e.classList.toggle("active",d)}),o.forEach(e=>{let d=e.getAttribute("data-category-id");t==="todos"||d===t?(e.style.display="block",e.hasAttribute("data-lazy-category")&&!e.classList.contains("rendered")&&window.CatalogVirtualizer&&window.CatalogVirtualizer.loadCategory(e)):e.style.display="none"});let n=document.getElementById("cardapioSearchInput");n&&(n.value="",document.querySelectorAll(".cardapio-product-card").forEach(e=>e.style.display="flex"))},bindAddButtons:function(){let t=document.querySelector(".cardapio-products");t&&t.addEventListener("click",function(o){let a=o.target.closest(".cardapio-add-btn"),n=o.target.closest(".cardapio-product-card");if(a){if(o.stopPropagation(),o.preventDefault(),n){let e=n.getAttribute("data-product-id"),d=n.getAttribute("data-combo-id");u.ui.handleAddClick(e,d)}return}if(n){let e=n.getAttribute("data-product-id"),d=n.getAttribute("data-combo-id");e?window.CardapioModals?CardapioModals.openProduct(e):window.openProductModal&&window.openProductModal(e):d&&window.CardapioModals&&CardapioModals.openCombo&&CardapioModals.openCombo(d)}})},handleAddClick:function(t,o){t?window.CardapioModals?CardapioModals.openProduct(t):window.openProductModal&&window.openProductModal(t):o&&window.CardapioModals&&CardapioModals.openCombo&&CardapioModals.openCombo(o)}}};window.CardapioManager=u,window.filterByCategory=t=>u.ui.filterByCategory(t),document.addEventListener("DOMContentLoaded",()=>u.init())})();})();
